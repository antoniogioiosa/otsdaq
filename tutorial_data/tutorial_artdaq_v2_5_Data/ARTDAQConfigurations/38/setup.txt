echo # This script is intended to be sourced.

sh -c "[ `ps $$ | grep bash | wc -l` -gt 0 ] || { echo 'Please switch to the bash shell before running the otsdaq-demo.'; exit; }" || exit

echo "Initially your products path was PRODUCTS=${PRODUCTS}"

#unalias because the original VM aliased for users
unalias kx >/dev/null 2>&1
unalias StartOTS.sh >/dev/null 2>&1

#source /home/eflumerf/Desktop/otsdaq-mrb-base/setup_otsdaq_mrb.sh e15:s67:debug
source /home/eflumerf/Desktop/otsdaq-mrb-base/setup_otsdaq_mrb.sh e17:s67:debug
#source /home/eflumerf/Desktop/otsdaq-mrb-base/setup_otsdaq_mrb.sh e17:s82:debug
#source /home/eflumerf/Desktop/otsdaq-mrb-base/setup_otsdaq_mrb.sh e17:s87:debug

# Setup environment when building with MRB (As there's no setupARTDAQOTS file)

  export OTSDAQ_DEMO_LIB=${MRB_BUILDDIR}/otsdaq_demo/lib
  #export OTSDAQ_LIB=${MRB_BUILDDIR}/otsdaq/lib
  #export OTSDAQ_UTILITIES_LIB=${MRB_BUILDDIR}/otsdaq_utilities/lib
#Done with Setup environment when building with MRB (As there's no setupARTDAQOTS file)


        export CETPKG_INSTALL=/home/eflumerf/Desktop/otsdaq-mrb-base/products
export CETPKG_J=16

export OTS_MAIN_PORT=2015

#        export USER_DATA="/home/eflumerf/Desktop/otsdaq-mrb-base/srcs/otsdaq_demo/NoGitData"
#        export ARTDAQ_DATABASE_URI="filesystemdb:///home/eflumerf/Desktop/otsdaq-mrb-base/srcs/otsdaq_demo/NoGitDatabases/filesystemdb/test_db"
export USER_DATA=/home/eflumerf/Desktop/otsdaq-mrb-base/LocalData/Data
export ARTDAQ_DATABASE_URI=filesystemdb:///home/eflumerf/Desktop/otsdaq-mrb-base/LocalData/databases/filesystemdb/test_db
        export OTSDAQ_DATA="/home/eflumerf/Desktop/otsdaq-mrb-base/OutputData"
export ROOT_BROWSER_PATH=${OTSDAQ_DATA}        		
        
echo "Now your user data path is USER_DATA = ${USER_DATA}"
        echo "Now your database path is ARTDAQ_DATABASE_URI = ${ARTDAQ_DATABASE_URI}"
echo

        alias rawEventDump="art -c /home/eflumerf/Desktop/otsdaq-mrb-base/srcs/otsdaq/artdaq-ots/ArtModules/fcl/rawEventDump.fcl"
        alias kx='StartOTS.sh -k'
       
        echo
        echo "Now use 'StartOTS.sh --wiz' to configure otsdaq"
        echo " 	Then use 'StartOTS.sh' to start otsdaq"
        echo " 	Or use 'StartOTS.sh --help' for more options"
        echo
        echo "    use 'kx' to kill otsdaq processes"
echo
  
